---
title: "æ¨¡å—è®¾è®¡"
icon: /assets/icon/maven.png
order: 4
---

# FlowMind æ¨¡å—è®¾è®¡æ–‡æ¡£

## ğŸ§© æ¨¡å—æ¦‚è§ˆ

FlowMind ç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå°†åŠŸèƒ½åˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ã€‚æ•´ä½“æ¶æ„åŸºäº Spring Cloud Alibaba å¾®æœåŠ¡æ¡†æ¶ï¼Œç»“åˆ Flowable å·¥ä½œæµå¼•æ“å’Œ LLM æ™ºèƒ½ Agentï¼Œå®ç°æ™ºèƒ½åŒ–å®¡æ‰¹æµç¨‹ã€‚

### ç³»ç»Ÿæ¨¡å—ç»“æ„

```
flowmind/
â”œâ”€â”€ agent/                              # æ™ºèƒ½ Agent å±‚ (LLM + FastAPI)
â”‚   â”œâ”€â”€ main.py                         # FastAPI å¯åŠ¨å…¥å£
â”‚   â”œâ”€â”€ core/                           # ä¸šåŠ¡æ ¸å¿ƒé€»è¾‘ (ä»»åŠ¡è§„åˆ’ã€æ„å›¾è§£æ)
â”‚   â”œâ”€â”€ llm/                            # LLM è°ƒç”¨å°è£… (OpenAI / Ollama / HuggingFace)
â”‚   â”œâ”€â”€ tools/                          # æ™ºèƒ½ä½“å¯è°ƒç”¨çš„å·¥å…· (SQLã€æ–‡ä»¶ã€æµç¨‹)
â”‚   â”œâ”€â”€ memory/                         # çŸ¥è¯†è®°å¿†ç®¡ç† (å‘é‡æ•°æ®åº“)
â”‚   â”œâ”€â”€ configs/                        # æ¨¡å‹ä¸æœåŠ¡é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/                           # å‰ç«¯å±‚ (Vue3 + TypeScript + ElementPlus)
â”‚   â”œâ”€â”€ flowmind-web/                   # Web ç®¡ç†ç«¯ (å®¡æ‰¹ã€ç›‘æ§ã€å»ºæ¨¡)
â”‚   â”œâ”€â”€ flowmind-modeler/               # BPMN æ¨¡å‹è®¾è®¡å™¨å‰ç«¯ (bpmn.js + vue-bpmn)
â”‚   â””â”€â”€ flowmind-mobile/                # ç§»åŠ¨ç«¯ (Vue3 + TDesign Mobile)
â”œâ”€â”€ flowmind-cloud/                     # FlowMindåç«¯å¾®æœåŠ¡å¹³å°
â”‚   â”œâ”€â”€ flowmind-api/                   # å…¬å…±APIæ¨¡å—ï¼ˆDTOã€Feignæ¥å£ï¼‰
â”‚   â”œâ”€â”€ flowmind-common/                # é€šç”¨æ¨¡å—
        â”œâ”€â”€ flowmind-common-core/       # å·¥å…·ç±»ã€å¼‚å¸¸ã€ç»“æœå°è£…
        â”œâ”€â”€ flowmind-common-dto/        # DTO / VO / å¸¸é‡
        â””â”€â”€ flowmind-common-feign/      # å„æœåŠ¡çš„ Feign Client å®¢æˆ·ç«¯å®šä¹‰
â”‚   â”œâ”€â”€ flowmind-auth/                  # è®¤è¯æˆæƒæœåŠ¡
â”‚   â”œâ”€â”€ flowmind-gateway/               # APIç½‘å…³
â”‚   â”œâ”€â”€ flowmind-workflow/              # å·¥ä½œæµå¼•æ“ï¼ˆFlowableé›†æˆï¼‰
â”‚   â”œâ”€â”€ flowmind-application/           # è¡¨å•ä¸ä¸šåŠ¡æ¨¡æ¿æœåŠ¡
â”‚   â”œâ”€â”€ flowmind-content/               # æ–‡ä»¶ä¸èµ„æºç®¡ç†
â”‚   â”œâ”€â”€ flowmind-notification/          # æ¶ˆæ¯é€šçŸ¥ï¼ˆé‚®ä»¶/WebSocketï¼‰
â”‚   â””â”€â”€ flowmind-monitor/               # ç›‘æ§å®¡è®¡ï¼ˆæ“ä½œæ—¥å¿—/æ€§èƒ½ï¼‰
â”œâ”€â”€ bpmn/                               # BPMN æµç¨‹å®šä¹‰æ–‡ä»¶ï¼ˆXMLï¼‰
â”‚   â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ examples/
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ infra/                              # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ docker/                         # Dockerfile ä¸ Compose æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”‚   â”œâ”€â”€ Dockerfile.agent
â”‚   â”‚   â”œâ”€â”€ Dockerfile.gateway
â”‚   â”‚   â””â”€â”€ Dockerfile.frontend
â”‚   â”‚
â”‚   â”œâ”€â”€ k8s/                            # Kubernetes éƒ¨ç½²æ¸…å• / Helm Chart
â”‚   â”‚   â”œâ”€â”€ charts/
â”‚   â”‚   â”œâ”€â”€ deployment/
â”‚   â”‚   â””â”€â”€ service/
â”‚   â”‚
â”‚   â””â”€â”€ jenkins/                        # CI/CD Pipeline è„šæœ¬
â”‚       â”œâ”€â”€ Jenkinsfile
â”‚       â”œâ”€â”€ pipeline-template.groovy
â”‚       â””â”€â”€ env/
â”œâ”€â”€ scripts/                            # è¾…åŠ©è„šæœ¬ï¼ˆåˆå§‹åŒ–ã€è¿ç§»ã€æµ‹è¯•ï¼‰
â”‚   â”œâ”€â”€ init-db.sql
â”‚   â”œâ”€â”€ migrate.sh
â”‚   â”œâ”€â”€ start-dev.sh
â”‚   â””â”€â”€ clean.sh
â”œâ”€â”€ docs/                               # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/                   # æ¶æ„ä¸è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                            # æ¥å£æ–‡æ¡£ï¼ˆOpenAPI / Swagger å¯¼å‡ºï¼‰
â”‚   â”œâ”€â”€ dev-guide/                      # å¼€å‘è§„èŒƒä¸æµç¨‹
â”‚   â”œâ”€â”€ deployment/                     # éƒ¨ç½²ä¸è¿ç»´è¯´æ˜
â”‚   â””â”€â”€ FlowMind é¡¹ç›®å¼€å‘æ¨¡å¼ä¸æµç¨‹è§„èŒƒæ–‡æ¡£.md
â”‚
â”œâ”€â”€ .gitlab-ci.yml                      # CI/CD é…ç½®
â”œâ”€â”€ pom.xml                             # é¡¹ç›®èšåˆé…ç½®
â””â”€â”€ README.md                           # é¡¹ç›®è¯´æ˜æ–‡ä»¶
```

---

## ğŸ§  æ™ºèƒ½ Agent æ¨¡å— (Python)

### æ¨¡å—æ¦‚è¿°

æ™ºèƒ½ Agent æ¨¡å—æ˜¯ FlowMind ç³»ç»Ÿçš„æ ¸å¿ƒæ™ºèƒ½ç»„ä»¶ï¼ŒåŸºäº Python å®ç°ï¼Œè´Ÿè´£å¤„ç†è‡ªç„¶è¯­è¨€çš„å®¡æ‰¹ç”³è¯·ï¼Œæå–å…³é”®ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œåˆæ­¥çš„æ™ºèƒ½åˆ¤æ–­å’Œè·¯ç”±ã€‚

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: FastAPI
- **LLM æ¡†æ¶**: LangChain
- **å¤§æ¨¡å‹**: OpenAI GPT / Claude / æœ¬åœ° LLaMA
- **å‘é‡å­˜å‚¨**: FAISS / Chroma
- **é€šä¿¡åè®®**: gRPC + REST
- **ç›‘æ§**: Loguru + Prometheus Exporter

### æ ¸å¿ƒåŠŸèƒ½

1. **æ–‡æœ¬åˆ†æ**: å¯¹ç”¨æˆ·æäº¤çš„å®¡æ‰¹ç”³è¯·æ–‡æœ¬è¿›è¡Œè¯­ä¹‰åˆ†æ
2. **ä¿¡æ¯æå–**: ä»æ–‡æœ¬ä¸­æå–å…³é”®å­—æ®µï¼ˆå¦‚ç”³è¯·äººã€éƒ¨é—¨ã€ç”³è¯·ç±»å‹ã€é‡‘é¢ç­‰ï¼‰
3. **æ™ºèƒ½åˆ¤æ–­**: æ ¹æ®é¢„è®¾è§„åˆ™å’Œå†å²æ•°æ®ï¼Œå¯¹ç”³è¯·è¿›è¡Œåˆæ­¥åˆ¤æ–­
4. **è·¯ç”±åˆ†å‘**: å°†å¤„ç†åçš„ç”³è¯·åˆ†å‘åˆ°ç›¸åº”çš„å·¥ä½œæµ

### æ¨¡å—ç»“æ„

```
agent/
â”œâ”€â”€ main.py                 # åº”ç”¨å…¥å£
â”œâ”€â”€ core/                   # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ llm_manager.py      # LLM ç®¡ç†å™¨
â”‚   â”œâ”€â”€ prompt_manager.py   # Prompt ç®¡ç†å™¨
â”‚   â”œâ”€â”€ text_processor.py    # æ–‡æœ¬å¤„ç†å™¨
â”‚   â””â”€â”€ router.py           # è·¯ç”±åˆ†å‘å™¨
â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ application.py      # ç”³è¯·æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ analysis_result.py  # åˆ†æç»“æœæ¨¡å‹
â”œâ”€â”€ services/               # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ analysis_service.py # åˆ†ææœåŠ¡
â”‚   â””â”€â”€ routing_service.py  # è·¯ç”±æœåŠ¡
â”œâ”€â”€ utils/                  # å·¥å…·ç±»
â”‚   â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ logger.py           # æ—¥å¿—ç®¡ç†
â””â”€â”€ tests/                  # æµ‹è¯•ç”¨ä¾‹
```

### æ¥å£è®¾è®¡

#### æ–‡æœ¬åˆ†ææ¥å£

```http
POST /api/v1/analyze
Content-Type: application/json

{
  "text": "ç”³è¯·éƒ¨é—¨æ´»åŠ¨ç»è´¹2000å…ƒï¼Œç”¨äºå›¢å»ºæ´»åŠ¨",
  "context": {
    "applicant": "å¼ ä¸‰",
    "department": "æŠ€æœ¯éƒ¨"
  }
}
```

å“åº”:

```json
{
  "application_id": "app_123456",
  "type": "department_activity",
  "amount": 2000,
  "department": "æŠ€æœ¯éƒ¨",
  "applicant": "å¼ ä¸‰",
  "confidence": 0.95,
  "suggested_workflow": "standard_approval"
}
```

---

## ğŸ“¦ å·¥ä½œæµå¼•æ“æœåŠ¡æ¨¡å— (flowmind-workflow)

### æ¨¡å—æ¦‚è¿°

å·¥ä½œæµå¼•æ“æœåŠ¡æ¨¡å—æ˜¯ FlowMind ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼Œè´Ÿè´£å¤„ç†å®¡æ‰¹æµç¨‹çš„åˆ›å»ºã€æ‰§è¡Œå’Œç®¡ç†ã€‚è¯¥æ¨¡å—ä¸ Flowable å·¥ä½œæµå¼•æ“æ·±åº¦é›†æˆï¼Œå®ç°å®¡æ‰¹æµç¨‹çš„è‡ªåŠ¨åŒ–æ‰§è¡Œã€‚

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Spring Boot
- **ORM**: MyBatis-Plus
- **æ•°æ®åº“**: PostgreSQL
- **ç¼“å­˜**: Redis
- **æ¶ˆæ¯é˜Ÿåˆ—**: RocketMQ
- **å·¥ä½œæµå¼•æ“**: Flowable

### æ ¸å¿ƒåŠŸèƒ½

1. **æµç¨‹ç®¡ç†**: åˆ›å»ºã€å¯åŠ¨ã€æš‚åœã€ç»ˆæ­¢å®¡æ‰¹æµç¨‹
2. **ä»»åŠ¡å¤„ç†**: åˆ†é…ã€å¤„ç†ã€å®Œæˆå®¡æ‰¹ä»»åŠ¡
3. **çŠ¶æ€è·Ÿè¸ª**: å®æ—¶è·Ÿè¸ªå®¡æ‰¹çŠ¶æ€å’Œè¿›åº¦
4. **å†³ç­–æ”¯æŒ**: ä¸ºå®¡æ‰¹äººæä¾›å†³ç­–æ”¯æŒä¿¡æ¯

### æ¨¡å—ç»“æ„

```
flowmind-workflow/
â”œâ”€â”€ src/main/java/com/flowmind/workflow/
â”‚   â”œâ”€â”€ WorkflowApplication.java     # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”‚   â””â”€â”€ FlowableConfig.java      # Flowableé…ç½®
â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/                     # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ exception/                   # å¼‚å¸¸å¤„ç†
â”‚   â””â”€â”€ client/                      # å¤–éƒ¨æœåŠ¡å®¢æˆ·ç«¯
â””â”€â”€ src/main/resources/
    â”œâ”€â”€ application.yml              # åº”ç”¨é…ç½®
    â”œâ”€â”€ mapper/                      # MyBatis æ˜ å°„æ–‡ä»¶
    â””â”€â”€ processes/                   # Flowable æµç¨‹å®šä¹‰
```

### æ ¸å¿ƒç±»è®¾è®¡

#### å·¥ä½œæµå®ä¾‹å®ä½“ (WorkflowInstance)

```java
@Entity
public class WorkflowInstance {
    @Id
    private String id;
    private String name;
    private String description;
    private String processDefinitionKey;
    private String businessKey;
    private ProcessStatus status;
    private String createdBy;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    // getters and setters
}
```

#### å®¡æ‰¹ä»»åŠ¡å®ä½“ (ApprovalTask)

```java
@Entity
public class ApprovalTask {
    @Id
    private String id;
    private String processInstanceId;
    private String taskDefinitionKey;
    private String assignee;
    private TaskStatus status;
    private String description;
    private LocalDateTime createdAt;
    private LocalDateTime dueDate;
    // getters and setters
}
```

### æ¥å£è®¾è®¡

#### åˆ›å»ºå·¥ä½œæµå®ä¾‹

```http
POST /api/workflow/instances
Content-Type: application/json

{
  "name": "éƒ¨é—¨ç»è´¹ç”³è¯·",
  "description": "æŠ€æœ¯éƒ¨ç”³è¯·å›¢å»ºç»è´¹",
  "processDefinitionKey": "department_funding",
  "businessKey": "APPLY-2024-001",
  "createdBy": "å¼ ä¸‰"
}
```

#### æŸ¥è¯¢å®¡æ‰¹ä»»åŠ¡

```http
GET /api/workflow/tasks?assignee=zhangsan&status=PENDING
```

---

## ğŸ“‹ è¡¨å•ä¸ä¸šåŠ¡æ¨¡æ¿æœåŠ¡æ¨¡å— (flowmind-application)

### æ¨¡å—æ¦‚è¿°

è¡¨å•ä¸ä¸šåŠ¡æ¨¡æ¿æœåŠ¡æ¨¡å—è´Ÿè´£ç®¡ç†ç³»ç»Ÿä¸­çš„å„ç±»ä¸šåŠ¡è¡¨å•ã€æ¨¡æ¿å®šä¹‰å’Œç”³è¯·æ•°æ®ã€‚è¯¥æ¨¡å—ä¸å·¥ä½œæµæœåŠ¡æ¨¡å—ç´§å¯†é…åˆï¼Œä¸ºå®¡æ‰¹æµç¨‹æä¾›è¡¨å•æ•°æ®æ”¯æ’‘ã€‚

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Spring Boot
- **ORM**: MyBatis-Plus
- **æ•°æ®åº“**: PostgreSQL
- **ç¼“å­˜**: Redis

### æ ¸å¿ƒåŠŸèƒ½

1. **è¡¨å•ç®¡ç†**: åˆ›å»ºã€ç¼–è¾‘å’Œç®¡ç†å„ç±»ä¸šåŠ¡è¡¨å•
2. **æ¨¡æ¿å®šä¹‰**: ç»´æŠ¤å®¡æ‰¹æµç¨‹æ¨¡æ¿å’Œè¡¨å•æ¨¡æ¿
3. **æ•°æ®å­˜å‚¨**: å­˜å‚¨å’Œç®¡ç†è¡¨å•æäº¤çš„æ•°æ®
4. **æ•°æ®æ ¡éªŒ**: æä¾›è¡¨å•æ•°æ®çš„æ ¡éªŒå’ŒéªŒè¯

### æ¨¡å—ç»“æ„

```
flowmind-application/
â”œâ”€â”€ src/main/java/com/flowmind/application/
â”‚   â”œâ”€â”€ ApplicationServiceApplication.java  # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/                     # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ exception/                   # å¼‚å¸¸å¤„ç†
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml              # åº”ç”¨é…ç½®
```

### æ ¸å¿ƒç±»è®¾è®¡

#### è¡¨å•å®šä¹‰å®ä½“ (FormDefinition)

```java
@Entity
public class FormDefinition {
    @Id
    private String id;
    private String name;
    private String code;
    private String description;
    private String schema;
    private FormStatus status;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    // getters and setters
}
```

#### ç”³è¯·è¡¨å•å®ä½“ (ApplicationForm)

```java
@Entity
public class ApplicationForm {
    @Id
    private String id;
    private String formDefinitionId;
    private String businessKey;
    private String applicantId;
    private String applicantName;
    private String departmentId;
    private String formData;
    private FormStatus status;
    private LocalDateTime submittedAt;
    private LocalDateTime updatedAt;
    // getters and setters
}
```

---

## ğŸ“¢ æ¶ˆæ¯é€šçŸ¥æœåŠ¡æ¨¡å— (flowmind-notification)

### æ¨¡å—æ¦‚è¿°

æ¶ˆæ¯é€šçŸ¥æœåŠ¡æ¨¡å—è´Ÿè´£å‘ç”¨æˆ·å‘é€å„ç±»é€šçŸ¥ï¼ŒåŒ…æ‹¬å®¡æ‰¹çŠ¶æ€å˜æ›´ã€ä»»åŠ¡åˆ†é…ã€ç³»ç»Ÿæé†’ç­‰ã€‚æ”¯æŒå¤šç§é€šçŸ¥æ¸ é“ï¼Œå¦‚é‚®ä»¶ã€WebSocketå®æ—¶æ¨é€ç­‰ã€‚

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Spring Boot
- **é‚®ä»¶**: Spring Mail
- **WebSocket**: Spring WebSocket
- **æ¶ˆæ¯é˜Ÿåˆ—**: RocketMQ

### æ ¸å¿ƒåŠŸèƒ½

1. **é‚®ä»¶é€šçŸ¥**: å‘é€é‚®ä»¶é€šçŸ¥
2. **å®æ—¶é€šçŸ¥**: é€šè¿‡ WebSocket å‘é€å®æ—¶é€šçŸ¥
3. **çŸ­ä¿¡é€šçŸ¥**: å‘é€çŸ­ä¿¡é€šçŸ¥ï¼ˆé›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼‰
4. **é€šçŸ¥æ¨¡æ¿**: ç®¡ç†å„ç±»é€šçŸ¥æ¨¡æ¿

### æ¨¡å—ç»“æ„

```
flowmind-notification/
â”œâ”€â”€ src/main/java/com/flowmind/notification/
â”‚   â”œâ”€â”€ NotificationApplication.java # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/                     # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ exception/                   # å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ websocket/                   # WebSocket æ”¯æŒ
â”‚   â””â”€â”€ template/                    # é€šçŸ¥æ¨¡æ¿ç®¡ç†
â””â”€â”€ src/main/resources/
    â”œâ”€â”€ application.yml              # åº”ç”¨é…ç½®
    â””â”€â”€ templates/                   # é€šçŸ¥æ¨¡æ¿æ–‡ä»¶
```

### æ ¸å¿ƒç±»è®¾è®¡

#### é€šçŸ¥å®ä½“ (Notification)

```java
@Entity
public class Notification {
    @Id
    private String id;
    private String userId;
    private String title;
    private String content;
    private NotificationType type;
    private NotificationStatus status;
    private LocalDateTime createdAt;
    private LocalDateTime sentAt;
    // getters and setters
}
```

---

## ğŸ” è®¤è¯æˆæƒæœåŠ¡æ¨¡å— (flowmind-auth)

### æ¨¡å—æ¦‚è¿°

è®¤è¯æˆæƒæœåŠ¡æ¨¡å—è´Ÿè´£ç³»ç»Ÿçš„ç”¨æˆ·è®¤è¯å’Œæˆæƒç®¡ç†ï¼ŒåŸºäº JWT å®ç°æ— çŠ¶æ€è®¤è¯ï¼Œç¡®ä¿ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Spring Boot
- **å®‰å…¨æ¡†æ¶**: Spring Security
- **è®¤è¯**: JWT
- **æ•°æ®åº“**: PostgreSQL

### æ ¸å¿ƒåŠŸèƒ½

1. **ç”¨æˆ·è®¤è¯**: ç”¨æˆ·ç™»å½•ã€ç™»å‡º
2. **ä»¤ç‰Œç®¡ç†**: JWT ä»¤ç‰Œçš„ç”Ÿæˆã€éªŒè¯å’Œåˆ·æ–°
3. **æƒé™æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
4. **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·ä¿¡æ¯ç®¡ç†

### æ¨¡å—ç»“æ„

```
flowmind-auth/
â”œâ”€â”€ src/main/java/com/flowmind/auth/
â”‚   â”œâ”€â”€ AuthApplication.java         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/                     # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ security/                    # å®‰å…¨ç›¸å…³
â”‚   â””â”€â”€ exception/                   # å¼‚å¸¸å¤„ç†
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml              # åº”ç”¨é…ç½®
```

### æ ¸å¿ƒç±»è®¾è®¡

#### ç”¨æˆ·å®ä½“ (User)

```java
@Entity
public class User {
    @Id
    private String id;
    private String username;
    private String password;
    private String email;
    private String fullName;
    private String department;
    private List<Role> roles;
    private boolean enabled;
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    // getters and setters
}
```

#### è§’è‰²å®ä½“ (Role)

```java
@Entity
public class Role {
    @Id
    private String id;
    private String name;
    private String description;
    private List<Permission> permissions;
    // getters and setters
}
```

---

## ğŸŒ APIç½‘å…³æœåŠ¡æ¨¡å— (flowmind-gateway)

### æ¨¡å—æ¦‚è¿°

APIç½‘å…³æœåŠ¡æ¨¡å—ä½œä¸ºç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼Œè´Ÿè´£è¯·æ±‚è·¯ç”±ã€è®¤è¯éªŒè¯ã€é™æµç†”æ–­ç­‰åŠŸèƒ½ï¼Œæ˜¯ç³»ç»Ÿçš„æµé‡æ§åˆ¶ä¸­å¿ƒã€‚

### æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Spring Cloud Gateway
- **é™æµ**: Sentinel
- **æ³¨å†Œä¸­å¿ƒ**: Nacos

### æ ¸å¿ƒåŠŸèƒ½

1. **è¯·æ±‚è·¯ç”±**: å°†è¯·æ±‚è·¯ç”±åˆ°ç›¸åº”çš„å¾®æœåŠ¡
2. **è®¤è¯éªŒè¯**: éªŒè¯ JWT ä»¤ç‰Œ
3. **é™æµç†”æ–­**: é˜²æ­¢ç³»ç»Ÿè¿‡è½½
4. **æ—¥å¿—è®°å½•**: è®°å½•è¯·æ±‚æ—¥å¿—

### æ¨¡å—ç»“æ„

```
flowmind-gateway/
â”œâ”€â”€ src/main/java/com/flowmind/gateway/
â”‚   â”œâ”€â”€ GatewayApplication.java      # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”œâ”€â”€ filter/                      # ç½‘å…³è¿‡æ»¤å™¨
â”‚   â””â”€â”€ handler/                     # å¼‚å¸¸å¤„ç†
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml              # åº”ç”¨é…ç½®
```

---

## ğŸ”„ å…¬å…±æ¨¡å—

### å…¬å…±APIæ¨¡å— (flowmind-api)

å…¬å…±APIæ¨¡å—åŒ…å«å„ä¸ªå¾®æœåŠ¡å…±äº«çš„æ¥å£å®šä¹‰å’Œæ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œæ˜¯æœåŠ¡é—´é€šä¿¡çš„åŸºç¡€ã€‚

```
flowmind-api/
â”œâ”€â”€ src/main/java/com/flowmind/api/
â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ vo/                          # è§†å›¾å¯¹è±¡
â”‚   â”œâ”€â”€ feign/                       # Feign æ¥å£å®šä¹‰
â”‚   â””â”€â”€ constant/                    # å¸¸é‡å®šä¹‰
â””â”€â”€ pom.xml                          # Maven é…ç½®
```

### é€šç”¨å·¥å…·æ¨¡å— (flowmind-common)

é€šç”¨å·¥å…·æ¨¡å—åŒ…å«å„ä¸ªå¾®æœåŠ¡å…±äº«çš„å·¥å…·ç±»ã€å¼‚å¸¸å¤„ç†ç­‰åŸºç¡€ç»„ä»¶ï¼Œç¡®ä¿ä»£ç çš„ä¸€è‡´æ€§å’Œå¤ç”¨æ€§ã€‚

```
flowmind-common/
â”œâ”€â”€ flowmind-common-core/
â”‚   â”œâ”€â”€ src/main/java/com/flowmind/common/core/
â”‚   â”‚   â”œâ”€â”€ util/                    # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ exception/               # é€šç”¨å¼‚å¸¸ç±»
â”‚   â”‚   â””â”€â”€ result/                  # ç»Ÿä¸€ç»“æœå°è£…
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ flowmind-common-dto/
â”‚   â”œâ”€â”€ src/main/java/com/flowmind/common/dto/
â”‚   â”‚   â”œâ”€â”€ base/                    # åŸºç¡€æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â””â”€â”€ constant/                # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ flowmind-common-feign/
â”‚   â”œâ”€â”€ src/main/java/com/flowmind/common/feign/
â”‚   â”‚   â””â”€â”€ client/                  # å„æœåŠ¡çš„Feignå®¢æˆ·ç«¯
â”‚   â””â”€â”€ pom.xml
â””â”€â”€ pom.xml                          # èšåˆé…ç½®
```

### æ–‡ä»¶ä¸èµ„æºç®¡ç†æ¨¡å— (flowmind-content)

æ–‡ä»¶ä¸èµ„æºç®¡ç†æ¨¡å—è´Ÿè´£å¤„ç†ç³»ç»Ÿä¸­çš„æ–‡ä»¶ä¸Šä¼ ã€å­˜å‚¨ã€ä¸‹è½½å’Œèµ„æºç®¡ç†åŠŸèƒ½ã€‚

```
flowmind-content/
â”œâ”€â”€ src/main/java/com/flowmind/content/
â”‚   â”œâ”€â”€ ContentApplication.java      # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/                     # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ exception/                   # å¼‚å¸¸å¤„ç†
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml              # åº”ç”¨é…ç½®
```

### ç›‘æ§å®¡è®¡æœåŠ¡æ¨¡å— (flowmind-monitor)

ç›‘æ§å®¡è®¡æœåŠ¡æ¨¡å—è´Ÿè´£ç³»ç»Ÿçš„è¿è¡Œç›‘æ§ã€æ“ä½œå®¡è®¡å’Œæ€§èƒ½åˆ†æï¼Œä¸ºç³»ç»Ÿè¿ç»´æä¾›æ”¯æŒã€‚

```
flowmind-monitor/
â”œâ”€â”€ src/main/java/com/flowmind/monitor/
â”‚   â”œâ”€â”€ MonitorApplication.java      # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
â”‚   â”œâ”€â”€ controller/                  # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/                     # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ repository/                  # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/                      # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/                         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ exception/                   # å¼‚å¸¸å¤„ç†
â””â”€â”€ src/main/resources/
    â””â”€â”€ application.yml              # åº”ç”¨é…ç½®
```

---

## ğŸ“Š æ¨¡å—é—´äº¤äº’å…³ç³»

### æ¨¡å—ä¾èµ–å…³ç³»å›¾

```plantuml
@startuml
skinparam rectangleStyle rounded
skinparam defaultFontName monospace

rectangle "Client" as client
rectangle "flowmind-gateway\n(APIç½‘å…³)" as gateway
rectangle "flowmind-auth\n(è®¤è¯æˆæƒ)" as auth
rectangle "flowmind-workflow\n(å·¥ä½œæµå¼•æ“æœåŠ¡)" as workflow
rectangle "flowmind-application\n(è¡¨å•ä¸ä¸šåŠ¡æ¨¡æ¿)" as application
rectangle "flowmind-notification\n(æ¶ˆæ¯é€šçŸ¥)" as notification
rectangle "flowmind-content\n(æ–‡ä»¶ä¸èµ„æº)" as content
rectangle "flowmind-monitor\n(ç›‘æ§å®¡è®¡)" as monitor
rectangle "Intelligent Agent\n(LLM)" as agent
rectangle "Flowable\n(å·¥ä½œæµå¼•æ“)" as flowable
rectangle "Infrastructure\nNacos/Sentinel/Redis/PostgreSQL" as infra
rectangle "Message Queue\n(RocketMQ)" as mq

client --> gateway
gateway --> auth : JWTéªŒè¯
gateway --> workflow
gateway --> application
gateway --> notification
gateway --> content
gateway --> monitor

workflow --> infra
workflow --> mq
workflow --> flowable
workflow --> agent : è°ƒç”¨åˆ†æ

application --> infra
application --> mq

content --> infra

notification --> infra
notification --> mq

monitor --> infra

agent --> mq : å‘é€åˆ†æç»“æœ
agent --> infra : å­˜å‚¨åˆ†æè®°å½•

flowable --> mq : ä»»åŠ¡äº‹ä»¶
flowable --> infra : æµç¨‹çŠ¶æ€

mq --> notification : å‘é€é€šçŸ¥
@enduml
```

---

## ğŸ§ª æ¨¡å—æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚

### é›†æˆæµ‹è¯•

æ¨¡å—é—´é›†æˆæµ‹è¯•ï¼ŒéªŒè¯æ¨¡å—é—´æ¥å£çš„æ­£ç¡®æ€§å’Œæ•°æ®ä¸€è‡´æ€§ã€‚

### ç«¯åˆ°ç«¯æµ‹è¯•

å®Œæ•´çš„ä¸šåŠ¡æµç¨‹æµ‹è¯•ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·åœºæ™¯ï¼ŒéªŒè¯ç³»ç»Ÿæ•´ä½“åŠŸèƒ½ã€‚

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ç¼“å­˜ç­–ç•¥**: åˆç†ä½¿ç”¨ Redis ç¼“å­˜çƒ­ç‚¹æ•°æ®
2. **æ•°æ®åº“ä¼˜åŒ–**: ä½¿ç”¨è¿æ¥æ± ã€ç´¢å¼•ä¼˜åŒ–ã€è¯»å†™åˆ†ç¦»
3. **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†éå®æ—¶ä»»åŠ¡
4. **è´Ÿè½½å‡è¡¡**: é€šè¿‡ Kubernetes å®ç°æœåŠ¡è´Ÿè½½å‡è¡¡
5. **é™æµç†”æ–­**: ä½¿ç”¨ Sentinel å®ç°æœåŠ¡ä¿æŠ¤

---

## ğŸ”® æœªæ¥æ‰©å±•æ–¹å‘

1. **æ¨¡å—æ‹†åˆ†**: éšç€ä¸šåŠ¡å‘å±•ï¼Œå¯å°†å¤§æ¨¡å—è¿›ä¸€æ­¥æ‹†åˆ†ä¸ºæ›´å°çš„å¾®æœåŠ¡
2. **æŠ€æœ¯å‡çº§**: æŒç»­å…³æ³¨æ–°æŠ€æœ¯ï¼Œé€‚æ—¶å‡çº§æŠ€æœ¯æ ˆ
3. **åŠŸèƒ½æ‰©å±•**: æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œæ‰©å±•æ–°çš„åŠŸèƒ½æ¨¡å—
4. **æ€§èƒ½ä¼˜åŒ–**: æŒç»­ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ