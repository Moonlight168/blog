---
title: "部署方案"
icon: /assets/icon/部署.png
order: 9
---

# FlowMind 部署方案

## 1. 环境要求

| 组件                    | 最低版本   | 说明          |
| --------------------- | ------ | ----------- |
| JDK                   | 17+    | Java运行环境    |
| Node.js               | 16+    | 前端构建环境     |
| MySQL                 | 8.0+   | 数据库服务       |
| Redis                 | 6.0+   | 缓存服务        |
| Nacos                 | 最新版   | 服务注册与配置中心  |
| Maven                 | 3.6+   | Java项目构建工具  |
| Git                   | 最新版   | 代码管理工具      |

## 2. 本地开发部署

### 2.1 启动基础服务

#### 2.1.1 启动Nacos

```bash
# 下载并解压Nacos
# 进入Nacos目录
cd nacos/bin

# Windows环境
startup.cmd -m standalone

# Linux环境
sh startup.sh -m standalone
```

访问地址：http://localhost:8848/nacos
默认账号密码：nacos/nacos

#### 2.1.2 启动Redis

```bash
# Windows环境
redis-server.exe redis.windows.conf

# Linux环境
redis-server /etc/redis/redis.conf
```

#### 2.1.3 初始化MySQL数据库

1. 创建数据库：`flowmind`
2. 执行sql目录下的sql脚本

#### 2.1.4 使用Docker Compose部署基础服务

创建 `docker-compose.yml` 文件：

```yaml
services:
  flowmind-nacos:
    container_name: flowmind-nacos
    image: nacos/nacos-server:v2.3.2
    environment:
      - MODE=standalone
      - NACOS_AUTH_ENABLE=false
      # Nacos 3.x / 2.4+ 启动必需的3项
      - NACOS_AUTH_TOKEN=TmFjb3MzeFNlY3JldEtleU11c3RCZTMyQnl0ZXNMb25nPTEyMzQ1Ng==
      - NACOS_AUTH_IDENTITY_KEY=serverIdentity
      - NACOS_AUTH_IDENTITY_VALUE=TmFjb3MzeFNlY3JldEtleU11c3RCZTMyQnl0ZXNMb25nPTEyMzQ1Ng==
    volumes:
      - ./nacos/logs/:/home/nacos/logs
      - /flowmind/docker/nacos/conf/application.properties:/home/nacos/conf/application.properties
    ports:
      - "8848:8848"
      - "9848:9848"
      - "9849:9849"
    depends_on:
      - flowmind-mysql
    networks:
      - flowmind-network

  flowmind-mysql:
    container_name: flowmind-mysql
    image: mysql:5.7
    build:
      context: ./mysql
    ports:
      - "3306:3306"
    volumes:
      - ./mysql/conf:/etc/mysql/conf.d
      - ./mysql/logs:/logs
      - ./mysql/data:/var/lib/mysql
    command: [
          'mysqld',
          '--innodb-buffer-pool-size=80M',
          '--character-set-server=utf8mb4',
          '--collation-server=utf8mb4_unicode_ci',
          '--default-time-zone=+8:00',
          '--lower-case-table-names=1'
        ]
    environment:
      MYSQL_DATABASE: 'flowmind-cloud'
      MYSQL_ROOT_PASSWORD: 123456
    networks:
      - flowmind-network

  flowmind-redis:
    container_name: flowmind-redis
    image: redis
    build:
      context: ./redis
    ports:
      - "6379:6379"
    volumes:
      - ./redis/conf/redis.conf:/flowmind/redis/redis.conf
      - ./redis/data:/data
    command: redis-server /flowmind/redis/redis.conf
    networks:
      - flowmind-network

  flowmind-nginx:
    container_name: flowmind-nginx
    image: nginx
    build:
      context: ./nginx
    ports:
      - "80:80"
    volumes:
      - ./nginx/html/dist:/flowmind/flowmind-ui
      - ./nginx/conf/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/logs:/var/log/nginx
      - ./nginx/conf.d:/etc/nginx/conf.d
    networks:
      - flowmind-network

networks:
  flowmind-network:
    driver: bridge
```

启动基础服务：

```bash
docker-compose up -d
```

### 2.2 启动后端服务

```bash
# 克隆项目
git clone https://github.com/Moonlight168/flowmind.git

# 进入后端项目目录
cd flowmind/flowmind-cloud

# 安装依赖
mvn clean install -DskipTests

# 启动服务
# 按照依赖关系顺序启动：认证服务 -> 网关服务 -> 系统服务 -> 工作流服务
```

### 2.3 启动前端服务

```bash
# 进入前端项目目录
cd flowmind/flowmind-ui

# 安装依赖
npm install --registry=https://registry.npmmirror.com

# 启动开发服务器
npm run dev
```

访问地址：http://localhost:80

## 3. 生产环境部署

生产环境部署建议使用Docker容器化部署，确保环境一致性和便于管理。

## 4. 部署验证

1. 访问Nacos控制台：http://localhost:8848/nacos，检查服务是否注册成功
2. 访问前端页面：http://localhost:80，使用测试账号登录（admin/123456）
3. 检查系统功能是否正常运行
4. 检查审批中心和草稿箱功能是否正常