---
title: "模块设计"
icon: /assets/icon/maven.png
order: 4
---

# 模块设计

## 概述

Gupt Management System 采用模块化设计，各个功能模块相对独立，通过明确的接口进行通信和交互。本文档详细描述系统中各个核心模块的设计，包括功能范围、数据结构、接口设计等内容。

## 1. 用户模块 (gupt-user-service)

### 1.1 功能范围
- 用户注册、登录、注销
- 用户信息管理（个人资料、联系方式、身份信息等）
- 角色和权限管理
- 用户分组管理
- 用户状态管理

### 1.2 核心实体
- **用户 (User)**：系统使用者的基本信息
- **角色 (Role)**：定义用户权限集合
- **权限 (Permission)**：系统功能操作权限
- **用户组 (UserGroup)**：用户的逻辑分组
- **用户关系 (UserRelation)**：用户之间的关联关系

### 1.3 主要接口
- 用户认证接口
- 用户信息 CRUD 接口
- 角色管理接口
- 权限分配接口
- 用户组管理接口

### 1.4 业务流程
- 用户注册流程：信息填写 → 验证 → 创建用户 → 分配角色
- 用户登录流程：身份验证 → 权限校验 → 生成令牌
- 权限变更流程：权限申请 → 审核 → 权限更新

## 2. 认证模块 (gupt-auth)

### 2.1 功能范围
- 身份认证服务
- 令牌生成与管理（JWT）
- 权限校验

### 2.2 核心实体
- **认证请求 (AuthenticationRequest)**：认证所需的凭证
- **令牌 (Token)**：访问令牌和刷新令牌
- **授权信息 (AuthorizationInfo)**：授权上下文信息

### 2.3 主要接口
- 登录认证接口
- 令牌刷新接口
- 令牌验证接口
- 注销接口

### 2.4 安全策略
- 密码加密存储（BCrypt）
- 令牌过期机制
- 登录失败次数限制

## 3. 课程模块 (gupt-course-service)

### 3.1 功能范围
- 课程信息管理（创建、修改、删除、查询）
- 课程分类管理
- 选课管理（选课、退课、查看选课情况）
- 成绩管理（录入、修改、查询、统计）

### 3.2 核心实体
- **课程 (Course)**：课程基本信息
- **章节 (Chapter)**：课程内容章节
- **选课记录 (CourseSelection)**：学生选课记录
- **成绩 (Score)**：学生课程成绩

### 3.3 主要接口
- 课程管理接口
- 选课操作接口
- 成绩管理接口
- 课程统计分析接口

### 3.4 业务规则
- 选课时间限制
- 学分冲突检测
- 成绩录入权限控制

## 4. 宿舍模块 (gupt-dormitory-service)

### 4.1 功能范围
- 宿舍信息管理（楼号、房间、床位）
- 学生入住管理
- 宿舍报修管理
- 卫生检查管理

### 4.2 核心实体
- **宿舍楼 (DormitoryBuilding)**：宿舍楼宇信息
- **房间 (Room)**：宿舍房间信息
- **床位 (Bed)**：床位信息
- **住宿记录 (AccommodationRecord)**：学生住宿记录
- **报修单 (RepairOrder)**：维修请求记录

### 4.3 主要接口
- 宿舍资源管理接口
- 入住退房接口
- 报修申请处理接口
- 卫生检查记录接口

### 4.4 业务流程
- 入住流程：分配房间 → 确认入住 → 生成住宿记录
- 报修流程：提交申请 → 分派维修 → 维修完成 → 确认验收

## 5. 社团模块 (gupt-club-service)

### 5.1 功能范围
- 社团信息管理
- 社团成员管理
- 社团活动发布与管理
- 社团申请与审批

### 5.2 核心实体
- **社团 (Club)**：社团基本信息
- **社团成员 (ClubMember)**：社团成员记录
- **社团活动 (ClubActivity)**：社团活动信息
- **申请记录 (ApplicationRecord)**：社团/加入申请

### 5.3 主要接口
- 社团管理接口
- 成员管理接口
- 活动发布管理接口
- 申请审批接口

### 5.4 业务规则
- 社团成立条件
- 成员加入/退出规则
- 活动审批流程

## 6. 信息模块 (gupt-info-service)

### 6.1 功能范围
- 通知公告发布与管理
- 新闻资讯管理
- 个人消息推送
- 消息阅读状态管理

### 6.2 核心实体
- **通知 (Notice)**：通知公告信息
- **新闻 (News)**：新闻资讯内容
- **个人消息 (PersonalMessage)**：用户个人消息
- **消息阅读记录 (MessageReadRecord)**：消息阅读状态

### 6.3 主要接口
- 通知管理接口
- 新闻管理接口
- 消息推送接口
- 消息查询接口

### 6.4 推送策略
- 站内信推送
- 邮件推送

## 7. 助手模块 (gupt-assistant-service)

### 7.1 功能范围
- 智能问答服务
- 业务流程自动化
- 数据统计分析

### 7.2 核心实体
- **问答记录 (QARecord)**：用户问答历史
- **自动化任务 (AutomationTask)**：自动化流程定义
- **统计指标 (StatisticsIndicator)**：统计数据指标

### 7.3 主要接口
- 智能问答接口
- 自动化任务管理接口
- 统计数据查询接口

### 7.4 技术实现
- 自然语言处理
- 规则引擎

## 8. 邮件模块 (gupt-email-service)

### 8.1 功能范围
- 邮件发送服务
- 邮件模板管理
- 邮件队列处理

### 8.2 核心实体
- **邮件 (Email)**：邮件内容和配置
- **邮件模板 (EmailTemplate)**：邮件模板定义
- **发送记录 (SendRecord)**：邮件发送历史

### 8.3 主要接口
- 邮件发送接口
- 模板管理接口
- 发送记录查询接口

### 8.4 优化策略
- 批量发送优化
- 失败重试机制

## 9. 公共模块 (gupt-common)

### 9.1 功能范围
- 通用工具类
- 常量定义
- 异常处理
- 数据校验
- 日志记录

### 9.2 核心组件
- **工具类库**：日期、加密、字符串处理等
- **异常体系**：自定义异常类和处理机制
- **统一响应**：标准化 API 响应格式
- **数据校验**：请求参数验证框架

## 10. 领域模型模块 (gupt-domain)

### 10.1 功能范围
- 核心业务实体定义
- 领域服务实现
- 业务规则封装

### 10.2 核心领域
- **用户领域**：用户相关业务规则和服务
- **学习领域**：课程、成绩等学习相关业务
- **生活领域**：宿舍、活动等生活相关业务
- **管理领域**：行政、审批等管理相关业务

### 10.3 设计原则
- 领域驱动设计 (DDD) 原则
- 实体和值对象区分
- 领域服务封装复杂业务逻辑

## 11. 消息队列模块 (gupt-message-queue)

### 11.1 功能范围
- 消息发送与接收
- 消息队列管理
- 消息重试机制

### 11.2 核心实体
- **消息 (Message)**：消息内容和元数据
- **消息队列 (MessageQueue)**：消息存储队列
- **消息订阅者 (MessageSubscriber)**：消息接收方

### 11.3 主要接口
- 消息发送接口
- 消息订阅接口
- 队列管理接口

## 12. 配置模块 (gupt-config)

### 12.1 功能范围
- 系统配置管理
- 环境配置切换
- 配置项缓存

### 12.2 核心实体
- **配置项 (ConfigItem)**：配置键值对
- **配置分组 (ConfigGroup)**：相关配置分组

### 12.3 主要接口
- 配置获取接口
- 配置更新接口
- 配置管理接口

## 13. API模块 (gupt-api)

### 13.1 功能范围
- API接口定义
- 接口文档生成
- 接口版本管理

### 13.2 核心实体
- **API接口 (ApiInterface)**：接口定义信息
- **接口版本 (ApiVersion)**：接口版本信息

### 13.3 主要接口
- RESTful API接口
- 接口文档查询接口

## 14. 第三方服务模块 (gupt-thirdpart-service)

### 14.1 功能范围
- 第三方服务集成
- 外部API调用封装
- 服务适配器实现

### 14.2 核心实体
- **服务配置 (ServiceConfig)**：第三方服务配置
- **调用记录 (CallRecord)**：服务调用记录

### 14.3 主要接口
- 第三方服务调用接口
- 服务健康检查接口

## 15. Web模块 (gupt-web)

### 15.1 功能范围
- Web控制器实现
- 视图层管理
- 静态资源处理

### 15.2 核心实体
- **控制器 (Controller)**：Web请求处理器
- **视图模型 (ViewModel)**：页面数据模型

### 15.3 主要接口
- HTTP请求处理接口
- 页面渲染接口