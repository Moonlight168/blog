---
order: 2
title: 基础文档
---
# 淘票票项目基础文档

## 1. 数据库表关系

淘票票项目采用分库分表的设计，主要数据库包括：

### 1.1 用户相关数据库 (taopiaopiao_user_0, taopiaopiao_user_1)
- `t_user_0`, `t_user_1`: 用户基本信息表
- `t_ticket_user_0`, `t_ticket_user_1`: 购票人信息表
- `t_user_email_0`, `t_user_email_1`: 用户邮箱信息表
- `t_user_mobile_0`, `t_user_mobile_1`: 用户手机号信息表

### 1.2 节目相关数据库 (taopiaopiao_program_0, taopiaopiao_program_1)
- `t_program_0`, `t_program_1`: 节目信息表
- `t_program_category`: 节目分类表
- `t_program_group_0`: 节目分组表

### 1.3 订单相关数据库 (taopiaopiao_order_0, taopiaopiao_order_1)
- `t_order_0` 至 `t_order_4`: 订单信息表
- `t_order_ticket_user_0` 至 `t_order_ticket_user_4`: 订单购票人关联表

### 1.4 支付相关数据库 (taopiaopiao_pay_0, taopiaopiao_pay_1)
- `t_pay_bill_0`, `t_pay_bill_1`: 支付账单表
- `t_refund_bill_0`, `t_refund_bill_1`: 退款账单表

## 2. 节目业务流程概述

### 2.1 节目信息管理
- 节目按类型分类（演唱会、话剧歌剧、体育、儿童亲子等）
- 节目支持多城市演出，通过节目分组关联
- 节目信息包含演出时间、地点、票价等详细信息

### 2.2 节目浏览流程
1. 用户访问首页，查看推荐节目列表
2. 可按分类浏览不同类型节目
3. 点击节目查看详细信息
4. 选择场次和票档

### 2.3 节目数据特点
- 节目信息采用分库分表存储
- 支持预售和实时开售两种模式
- 包含丰富的节目详情和购票须知

## 3. 项目基础讲解

### 3.1 项目概述
淘票票是一个在线票务预订系统，主要提供演唱会、话剧歌剧、体育赛事、儿童亲子等节目的在线订票服务。用户可以注册登录后浏览节目、选择座位、下单支付，并管理自己的订单。

### 3.2 核心功能模块
1. **用户管理模块**
   - 用户注册/登录
   - 个人信息管理
   - 实名认证

2. **节目管理模块**
   - 节目信息展示
   - 分类浏览
   - 搜索功能

3. **订单管理模块**
   - 选座下单
   - 订单支付
   - 订单查询
   - 退票处理

4. **支付模块**
   - 多种支付方式
   - 支付状态管理
   - 退款处理

### 3.3 技术架构特点
- 微服务架构：基于Spring Cloud和Spring Cloud Alibaba
- 高并发处理：采用Redis缓存、分布式锁等技术
- 数据存储：使用ShardingSphere实现分库分表
- 监控运维：集成ELK日志系统和Spring Boot Admin

### 3.4 核心业务流程
1. 用户浏览节目信息
2. 选择场次和座位
3. 创建订单
4. 支付订单
5. 查看订单状态
6. 观演或退票

## 4. 用户业务流程概述

### 4.1 用户注册与登录
- 支持手机号注册登录
- 支持邮箱注册登录
- 集成图形验证码防止恶意注册

### 4.2 用户信息管理
- 基本信息维护
- 实名认证
- 收货地址管理
- 购票人信息管理

### 4.3 用户购票流程
1. 用户登录系统
2. 浏览并选择节目
3. 选择场次和座位
4. 填写购票人信息
5. 提交订单并支付
6. 查看订单详情和票务信息

### 4.4 用户订单管理
- 查看订单列表
- 查看订单详情
- 取消未支付订单
- 申请退票
- 查看票夹信息

### 4.5 安全与风控
- 登录状态管理
- 敏感操作验证
- 异常行为监控
- 支付安全保护