---
title: RocketMQ
order: 3
icon: /assets/icon/rocketmq.png
---

## 如何提升RocketMQ顺序消费性能?

**核心原理**：基于分区+消费者组，同一队列内严格有序，不同队列并行处理。

**主要优化方案**：

1. **增加队列数量**：队列数=消费者数×2，提升并发能力

2. **优化消息分发**：生产端用Message Key确保相关消息同队列，消费端均衡分配避免倾斜

3. **优化消费处理**：异步处理耗时操作，批量拉取消息，线程池并行处理

4. **调整消费参数**：消费线程数设为CPU核心数2-4倍，增大pullBatchSize，缩短pullInterval

5. **分段顺序消费**：全局顺序拆分为局部顺序，按业务主键分队列，提高并行度

6. **水平扩展**：增加消费者实例(不超过队列数)，动态调整消费者数量