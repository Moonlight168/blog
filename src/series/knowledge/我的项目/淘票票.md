---
series: 我的项目
title: 淘票票
icon: /assets/icon/淘票票icon.png
order: 3
---
 
### 什么是布隆过滤器？你在什么场景下使用？

布隆过滤器是一种**空间高效**的概率型数据结构，用于快速判断元素是否可能存在于集合中。

**核心特点：**
- 内存占用小，查询速度快
- 可能存在误判（说存在但实际不存在，**但说不存在实际一定不存在**）
- 不支持删除操作

**应用场景：**
1. **防止缓存穿透**：拦截无效查询请求
2. **重复数据检查**：如用户名、手机号注册校验
3. **热门票务查询**：快速判断电影场次余票情况
4. **黑名单过滤**：识别恶意用户或IP

**实现方案：**
使用Redis的RedisBloom模块，容量100万，误判率0.01%

### 说一说你在这个项目中是如何进行分库分表的，为什么要这样做？

在这个项目中，我使用 **ShardingSphere** 来实现分库分表。用户表、手机号表、邮箱表等核心数据表都做了分库分表处理，例如：

* **用户表 `t_user`**

    * 分库键：`id`，分表键：`id`
    * 分片算法：MOD 取模
    * 实际表：`ds_0.t_user_0`、`ds_1.t_user_1`
    * 根据用户 ID 自动路由到对应数据库和表

* **手机号表 `t_user_mobile` / 邮箱表 `t_user_email`**

    * 分库键 / 分表键：`mobile` / `email`
    * 分片算法：HASH\_MOD
    * 自动计算落到具体的数据库和表，保证唯一性和高并发查询性能

**为什么要这样做：**

1. **提升性能**：单表数据量大时，查询和写入会成为瓶颈，分库分表可以分散压力。
2. **支持高并发**：多个库和表可以并行处理请求，减少数据库负载。
3. **可扩展性强**：随着业务增长，可增加数据库节点或表数量，轻松扩容。
4. **运维效率高**：单库备份和恢复更快，避免单点性能问题。

在业务代码里依然使用逻辑表（如 `t_user`）进行操作，ShardingSphere 会自动处理路由和加密字段，业务代码无需关心具体的物理表，实现透明分库分表。
