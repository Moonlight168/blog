---
title: MySQLç´¢å¼•è¯¦è§£
date: 2025-11-27
categories: ["æ•°æ®åº“"]
tags: ["MYSQL"]
---

# MySQLç´¢å¼•è¯¦è§£

## å‰è¨€
MySQLç´¢å¼•å°±åƒæ˜¯ä¸€æœ¬ä¹¦çš„ç›®å½•ï¼Œå®ƒè®©æ•°æ®åº“èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°æ‰€éœ€æ•°æ®ï¼Œè€Œä¸ç”¨æ‰«ææ•´ä¸ªè¡¨ã€‚åˆç†çš„ç´¢å¼•è®¾è®¡æ˜¯æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€èƒ½ä¹‹ä¸€ã€‚

## 1. ç´¢å¼•åŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ
ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æž„ï¼Œå­˜å‚¨ç€è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼ä»¥åŠå¯¹åº”çš„ç‰©ç†åœ°å€å¼•ç”¨ã€‚å°±åƒå›¾ä¹¦é¦†çš„ç›®å½•ç³»ç»Ÿï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°ç›®æ ‡å›¾ä¹¦çš„ä½ç½®ã€‚

### 1.2 ç´¢å¼•çš„å·¥ä½œåŽŸç†
```
åŽŸå§‹è¡¨æ•°æ®ï¼š
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  id â”‚   name  â”‚  email  â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1  â”‚  å¼ ä¸‰   â”‚zhang@1  â”‚
â”‚  2  â”‚  æŽå››   â”‚li@2     â”‚
â”‚  3  â”‚  çŽ‹äº”   â”‚wang@3   â”‚
â”‚  4  â”‚  èµµå…­   â”‚zhao@4   â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç´¢å¼•ç»“æž„ï¼ˆB+Treeï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  keyå€¼  â”‚  æŒ‡é’ˆ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    1    â”‚  æŒ‡å‘1  â”‚
â”‚    2    â”‚  æŒ‡å‘2  â”‚
â”‚    3    â”‚  æŒ‡å‘3  â”‚
â”‚    4    â”‚  æŒ‡å‘4  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æŸ¥æ‰¾è¿‡ç¨‹ï¼šæŸ¥æ‰¾key=3 â†’ æ‰¾åˆ°æŒ‡é’ˆ â†’ ç›´æŽ¥è®¿é—®ç›®æ ‡è®°å½•
```

### 1.3 ç´¢å¼•çš„æ ¸å¿ƒä¼˜åŠ¿
- **åŠ é€ŸæŸ¥è¯¢**ï¼šå¤§å¹…å‡å°‘æ•°æ®æ‰«æé‡
- **å‡å°‘I/Oæ“ä½œ**ï¼šé€šè¿‡ç´¢å¼•ç›´æŽ¥å®šä½æ•°æ®ä½ç½®
- **æé«˜æŽ’åºæ€§èƒ½**ï¼šç´¢å¼•å¤©ç„¶æœ‰åºï¼Œå¯åŠ é€ŸORDER BYæ“ä½œ
- **åŠ é€Ÿè¡¨è¿žæŽ¥**ï¼šåœ¨JOINæ“ä½œä¸­ï¼Œç´¢å¼•èƒ½æ˜¾è‘—æå‡æ€§èƒ½

## 2. ç´¢å¼•åˆ†ç±»

### 2.1 æŒ‰æ•°æ®ç»“æž„åˆ†ç±»

#### B+Tree ç´¢å¼•ï¼ˆé»˜è®¤ç±»åž‹ï¼‰
```sql
-- åˆ›å»ºB+Treeç´¢å¼•ï¼ˆMySQLé»˜è®¤ï¼‰
CREATE INDEX idx_name ON users(name);
```

**ç‰¹ç‚¹ï¼š**
- æ”¯æŒç­‰å€¼æŸ¥è¯¢ï¼š`WHERE name = 'å¼ ä¸‰'`
- æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼š`WHERE id > 10 AND id < 100`
- æ”¯æŒæŽ’åºï¼š`ORDER BY name`
- æ”¯æŒå‰ç¼€åŒ¹é…ï¼š`WHERE name LIKE 'å¼ %'`
- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼ŒæŸ¥è¯¢æ•ˆçŽ‡ç¨³å®š

#### å“ˆå¸Œç´¢å¼•
```sql
-- åˆ›å»ºå“ˆå¸Œç´¢å¼•ï¼ˆMemoryå’ŒInnoDBæ”¯æŒï¼‰
CREATE TABLE test_hash (
    id INT,
    name VARCHAR(20),
    INDEX USING HASH (name)
) ENGINE = MEMORY;
```

**ç‰¹ç‚¹ï¼š**
- æŸ¥è¯¢é€Ÿåº¦æžå¿«ï¼šO(1)æ—¶é—´å¤æ‚åº¦
- ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼šæ— æ³•è¿›è¡Œ `>`, `<` æ“ä½œ
- ä¸æ”¯æŒæŽ’åºï¼šå“ˆå¸Œæ— åº
- åªæ”¯æŒç­‰å€¼æŸ¥è¯¢ï¼š`WHERE name = 'å¼ ä¸‰'`

#### å…¨æ–‡ç´¢å¼•
```sql
-- åˆ›å»ºå…¨æ–‡ç´¢å¼•
CREATE FULLTEXT INDEX idx_content ON articles(content);
```

**ç‰¹ç‚¹ï¼š**
- ä¸“ä¸ºæ–‡æœ¬æœç´¢è®¾è®¡
- æ”¯æŒè‡ªç„¶è¯­è¨€æœç´¢
- ä¸æ”¯æŒä¸­æ–‡ï¼ˆéœ€è¦ç‰¹æ®Šé…ç½®ï¼‰

### 2.2 æŒ‰é€»è¾‘ç‰¹æ€§åˆ†ç±»

#### é€»è¾‘ç´¢å¼•ç±»åž‹å¯¹æ¯”è¡¨

| ç´¢å¼•ç±»åž‹ | å”¯ä¸€æ€§ | å…è®¸NULL | æŸ¥è¯¢æ€§èƒ½ | é€‚ç”¨åœºæ™¯ | æ•°é‡é™åˆ¶ |
|---------|--------|----------|----------|----------|----------|
| **ä¸»é”®** |  å”¯ä¸€ |  ä¸å…è®¸ |  æœ€ä¼˜ | ä¸»é”®æŸ¥è¯¢ | æ¯è¡¨1ä¸ª |
| **å”¯ä¸€** |  å”¯ä¸€ |  å…è®¸ |  å¾ˆå¥½ | é˜²æ­¢é‡å¤æ•°æ® | æ¯è¡¨å¤šä¸ª |
| **æ™®é€š** |  å¯é‡å¤ |  å…è®¸ |  ä¸€èˆ¬ | æ™®é€šæŸ¥è¯¢åŠ é€Ÿ | æ¯è¡¨å¤šä¸ª |
| **å¤åˆ** |  å¯é‡å¤ |  å…è®¸ |  ä¾èµ–åˆ—æ•° | å¤šæ¡ä»¶æŸ¥è¯¢ | æ¯è¡¨å¤šä¸ª |

#### ä¸»é”®ç´¢å¼•ï¼ˆPrimary Keyï¼‰
```sql
-- åˆ›å»ºè¡¨æ—¶æŒ‡å®šä¸»é”®ç´¢å¼•
CREATE TABLE users (
    id INT PRIMARY KEY,  -- è‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•
    name VARCHAR(50),
    email VARCHAR(100)
);
```

**ç‰¹ç‚¹ï¼š**
- å”¯ä¸€ä¸”éžç©ºï¼šæ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®
- è‡ªåŠ¨åˆ›å»ºï¼šä¸»é”®åˆ—è‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•
- æŸ¥è¯¢æœ€å¿«ï¼šä¸»é”®ç´¢å¼•æ˜¯æœ€ä¼˜çš„ç´¢å¼•

#### å”¯ä¸€ç´¢å¼•ï¼ˆUnique Indexï¼‰
```sql
-- åˆ›å»ºå”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX idx_email ON users(email);
```

**ç‰¹ç‚¹ï¼š**
- å€¼å”¯ä¸€ï¼šä¸å…è®¸é‡å¤å€¼ï¼ˆé™¤äº†NULLï¼‰
- åŠ é€ŸæŸ¥è¯¢ï¼šä¼˜åŒ–ç­‰å€¼æŸ¥æ‰¾
- æ•°æ®å®Œæ•´æ€§ï¼šé˜²æ­¢é‡å¤æ•°æ®

#### æ™®é€šç´¢å¼•ï¼ˆNormal Indexï¼‰
```sql
-- åˆ›å»ºæ™®é€šç´¢å¼•
CREATE INDEX idx_name ON users(name);
```

**ç‰¹ç‚¹ï¼š**
- æ— å”¯ä¸€æ€§é™åˆ¶ï¼šå€¼å¯ä»¥é‡å¤
- åŠ é€ŸæŸ¥è¯¢ï¼šä¼˜åŒ–ä¸€èˆ¬æŸ¥è¯¢
- é€‚ç”¨æ€§å¹¿ï¼šæœ€å¸¸ç”¨çš„ç´¢å¼•ç±»åž‹

#### å¤åˆç´¢å¼•ï¼ˆComposite Indexï¼‰
```sql
-- åˆ›å»ºå¤åˆç´¢å¼•
CREATE INDEX idx_name_email ON users(name, email);

-- æŸ¥è¯¢ä¼˜åŒ–å»ºè®®
-- æœ€ä¼˜ï¼šä½¿ç”¨å®Œæ•´ç´¢å¼•
SELECT * FROM users WHERE name = 'å¼ ä¸‰' AND email = 'zhang@1.com';

-- éƒ¨åˆ†ä½¿ç”¨ï¼šåªä½¿ç”¨nameåˆ—
SELECT * FROM users WHERE name = 'å¼ ä¸‰';

-- æ— æ³•ä½¿ç”¨ï¼šè·³è¿‡nameåˆ—
SELECT * FROM users WHERE email = 'zhang@1.com';
```

**æœ€å·¦å‰ç¼€åŽŸåˆ™ï¼š**
- `WHERE name = 'xxx'` - ä½¿ç”¨ç´¢å¼•
- `WHERE name = 'xxx' AND email = 'xxx'` - ä½¿ç”¨ç´¢å¼•
- `WHERE email = 'xxx'` - ä¸ä½¿ç”¨ç´¢å¼•

## 3. ç´¢å¼•çš„åˆ›å»ºå’Œç®¡ç†

### 3.1 åˆ›å»ºç´¢å¼•

#### åˆ›å»ºè¡¨æ—¶åˆ›å»ºç´¢å¼•
```sql
CREATE TABLE products (
    id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    price DECIMAL(10,2),
    category_id INT,
    created_at TIMESTAMP,
    -- ç´¢å¼•å®šä¹‰
    INDEX idx_name (name),           -- æ™®é€šç´¢å¼•
    UNIQUE INDEX idx_category (category_id), -- å”¯ä¸€ç´¢å¼•
    INDEX idx_price_category (price, category_id), -- å¤åˆç´¢å¼•
    INDEX idx_created_at (created_at),
    
    -- å¤–é”®çº¦æŸ
    FOREIGN KEY (category_id) REFERENCES categories(id)
) ENGINE=InnoDB;
```

#### å•ç‹¬åˆ›å»ºç´¢å¼•
```sql
-- æ™®é€šç´¢å¼•
CREATE INDEX idx_name ON users(name);

-- å”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX idx_email ON users(email);

-- å¤åˆç´¢å¼•
CREATE INDEX idx_user_status ON users(name, status);
```

### 3.2 ä¿®æ”¹å’Œåˆ é™¤ç´¢å¼•

```sql
-- åˆ é™¤ç´¢å¼•
DROP INDEX idx_name ON users;
DROP INDEX idx_email ON users;

-- åˆ é™¤ä¸»é”®ç´¢å¼•
ALTER TABLE users DROP PRIMARY KEY;

-- æ·»åŠ ä¸»é”®ç´¢å¼•
ALTER TABLE users ADD PRIMARY KEY (id);

-- åˆ é™¤å”¯ä¸€ç´¢å¼•
ALTER TABLE users DROP INDEX idx_email;

-- ä¿®æ”¹ç´¢å¼•ï¼ˆéœ€å…ˆåˆ é™¤å†æ·»åŠ ï¼‰
ALTER TABLE users DROP INDEX idx_name, ADD INDEX idx_name_new (name);
```

### 3.3 æŸ¥çœ‹ç´¢å¼•ä¿¡æ¯

```sql
-- æŸ¥çœ‹è¡¨çš„ç´¢å¼•ä¿¡æ¯
SHOW INDEX FROM users;
```

## 4. ç´¢å¼•ä½¿ç”¨æœ€ä½³å®žè·µ

### 4.1 ä»€ä¹ˆæ—¶å€™åº”è¯¥åˆ›å»ºç´¢å¼•ï¼Ÿ

#### é€‚åˆåˆ›å»ºç´¢å¼•çš„åœºæ™¯
1. **ä¸»é”®åˆ—**ï¼šè‡ªåŠ¨åˆ›å»ºï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
2. **å¤–é”®åˆ—**ï¼šåŠ é€ŸJOINæ“ä½œ
3. **WHEREæ¡ä»¶é¢‘ç¹ä½¿ç”¨çš„åˆ—**ï¼š
   ```sql
   -- é¢‘ç¹æŸ¥è¯¢ç”¨æˆ·çŠ¶æ€
   WHERE status = 'active'
   ```
4. **ORDER BYç»å¸¸ä½¿ç”¨çš„åˆ—**ï¼š
   ```sql
   -- ç»å¸¸æŒ‰åˆ›å»ºæ—¶é—´æŽ’åº
   ORDER BY created_at DESC
   ```
5. **GROUP BYç»å¸¸ä½¿ç”¨çš„åˆ—**ï¼š
   ```sql
   -- æŒ‰åˆ†ç±»ç»Ÿè®¡
   GROUP BY category_id
   ```

#### ä¸é€‚åˆåˆ›å»ºç´¢å¼•çš„åœºæ™¯
1. **å°è¡¨**ï¼šè¡¨è®°å½•å°‘äºŽå‡ ç™¾è¡Œ
2. **é¢‘ç¹æ›´æ–°çš„åˆ—**ï¼šUPDATEæ“ä½œä¼šåŒæ­¥æ›´æ–°ç´¢å¼•
3. **é‡å¤å€¼å¤šçš„åˆ—**ï¼šå¦‚æ€§åˆ«å­—æ®µï¼Œåªæœ‰'ç”·'ã€'å¥³'ä¸¤ä¸ªå€¼
4. **TEXTã€BLOBç­‰å¤§å­—æ®µ**ï¼šå ç”¨ç©ºé—´å¤§ï¼Œç»´æŠ¤æˆæœ¬é«˜
5. **å‡ ä¹Žä¸æŸ¥è¯¢çš„åˆ—**ï¼šä¸ä¼šå¸¦æ¥æ€§èƒ½æå‡

### 4.2 ç´¢å¼•è®¾è®¡åŽŸåˆ™

#### 1. éµå¾ªæœ€å·¦å‰ç¼€åŽŸåˆ™
```sql
-- åˆ›å»ºå¤åˆç´¢å¼•æ—¶è€ƒè™‘æœ€å·¦å‰ç¼€
CREATE INDEX idx_user_status_created ON users(status, created_at);

-- æœ€ä½³ä½¿ç”¨æ–¹å¼
SELECT * FROM users WHERE status = 'active' ORDER BY created_at DESC;
SELECT * FROM users WHERE status = 'active';  -- ä»å¯ä½¿ç”¨ç´¢å¼•
SELECT * FROM users WHERE created_at > '2023-01-01';  -- ä¸ä½¿ç”¨ç´¢å¼•
```

#### 2. é€‰æ‹©æ€§é«˜çš„åˆ—ä¼˜å…ˆ
```sql
-- å¥½çš„ç´¢å¼•é€‰æ‹©
CREATE INDEX idx_email ON users(email);  -- å”¯ä¸€æ€§é«˜

-- å·®çš„ç´¢å¼•é€‰æ‹©
CREATE INDEX idx_gender ON users(gender);  -- åªæœ‰'ç”·'ã€'å¥³'ä¸¤ä¸ªå€¼ï¼Œå€¼ç§ç±»å¾ˆå°‘
```

#### 3. é¿å…é‡å¤ç´¢å¼•
```sql
-- é”™è¯¯åšæ³•ï¼šåˆ›å»ºé‡å¤ç´¢å¼•
CREATE INDEX idx_email ON users(email);
CREATE UNIQUE INDEX idx_email ON users(email);  -- é‡å¤

-- æ­£ç¡®åšæ³•ï¼šä½¿ç”¨å”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX idx_email ON users(email);
```

### 4.3 ç´¢å¼•æ€§èƒ½ä¼˜åŒ–æŠ€å·§

#### å‰ç¼€ç´¢å¼•
```sql
-- å½“åˆ—å€¼å¾ˆé•¿æ—¶ï¼Œä½¿ç”¨å‰ç¼€ç´¢å¼•èŠ‚çœç©ºé—´
CREATE INDEX idx_name_prefix ON users(name(10));

-- ç´¢å¼•æ— æ³•å‘½ä¸­æƒ…å†µ
-- åŽç¼€æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆ%åœ¨å‰é¢ï¼Œæ— æ³•åˆ©ç”¨å‰ç¼€ç´¢å¼•ï¼‰
EXPLAIN SELECT * FROM sys_user WHERE user_name LIKE '%san123';
-- ä¸­é—´æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆ%åœ¨ä¸­é—´ï¼Œæ— æ³•åŒ¹é…å‰ç¼€ï¼‰
EXPLAIN SELECT * FROM sys_user WHERE user_name LIKE 'zhang%san';
-- å‡½æ•°æ“ä½œå­—æ®µï¼ˆç´¢å¼•å¤±æ•ˆï¼‰
EXPLAIN SELECT * FROM sys_user WHERE SUBSTR(user_name, 2) = 'hangsan123';
```

#### è¦†ç›–ç´¢å¼•
```sql
-- è¦†ç›–ç´¢å¼•ï¼šåŒ…å«æŸ¥è¯¢æ‰€éœ€æ‰€æœ‰åˆ—çš„ç´¢å¼•
CREATE INDEX idx_user_info ON users(id, name, email, status);

-- æŸ¥è¯¢å¯ä»¥ç›´æŽ¥ä»Žç´¢å¼•ä¸­èŽ·å–æ‰€æœ‰æ•°æ®ï¼Œæ— éœ€å›žè¡¨
SELECT id, name, email, status FROM users WHERE name = 'å¼ ä¸‰';
```

## 5. ç´¢å¼•æ€§èƒ½åˆ†æž

### 5.1 ä½¿ç”¨EXPLAINåˆ†æžæŸ¥è¯¢æ€§èƒ½

```sql
-- æŸ¥çœ‹æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’
EXPLAIN SELECT * FROM users WHERE name = 'å¼ ä¸‰' ORDER BY created_at;
```

**EXPLAINè¾“å‡ºå­—æ®µï¼š**
| å­—æ®µ | å«ä¹‰ | ä¼˜åŒ–ç›®æ ‡ |
|------|------|----------|
| `type` | è¿žæŽ¥ç±»åž‹ | è¶Šé å³è¶Šå¥½ï¼šconst > eq_ref > ref > range > index > all |
| `key` | å®žé™…ä½¿ç”¨çš„ç´¢å¼• | ä¸ä¸ºNULL |
| `rows` | æ‰«æè¡Œæ•° | è¶Šå°è¶Šå¥½ |
| `Extra` | é¢å¤–ä¿¡æ¯ | é¿å…Using filesort |

### 5.2 ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µ

#### ä½¿ç”¨å‡½æ•°å¯¼è‡´ç´¢å¼•å¤±æ•ˆ

**åŽŸå› åˆ†æžï¼š**
åœ¨ç´¢å¼•åˆ—ä¸Šä½¿ç”¨å‡½æ•°ä¼šä½¿åˆ—å€¼å‘ç”Ÿå˜åŒ–ï¼ŒMySQLæ— æ³•é¢„çŸ¥å‡½æ•°ç»“æžœï¼Œåªèƒ½å¯¹æ¯è¡Œæ•°æ®è®¡ç®—å‡½æ•°å€¼åŽå†æ¯”è¾ƒã€‚

```sql
-- ç´¢å¼•å¤±æ•ˆï¼šå‡½æ•°æ“ä½œåˆ—
SELECT * FROM users WHERE YEAR(created_at) = 2023;
-- éœ€è¦å¯¹created_atåˆ—çš„æ¯ä¸ªå€¼è®¡ç®—YEAR()å‡½æ•°

-- ç´¢å¼•ç”Ÿæ•ˆï¼šèŒƒå›´æŸ¥è¯¢æ›¿ä»£
SELECT * FROM users WHERE created_at >= '2023-01-01' 
    AND created_at < '2024-01-01';
-- ç›´æŽ¥æ¯”è¾ƒåˆ—å€¼ï¼Œå¯ä»¥åˆ©ç”¨ç´¢å¼•çš„èŒƒå›´æŸ¥è¯¢èƒ½åŠ›
```

#### ç±»åž‹è½¬æ¢å¯¼è‡´ç´¢å¼•å¤±æ•ˆ

**åŽŸå› åˆ†æžï¼š**
å½“æ¯”è¾ƒä¸åŒç±»åž‹æ—¶ï¼ŒMySQLä¼šè¿›è¡Œéšå¼ç±»åž‹è½¬æ¢ï¼Œå¯¼è‡´ç´¢å¼•åˆ—çš„å€¼è¢«è½¬æ¢ï¼Œæ— æ³•ä½¿ç”¨ç´¢å¼•è¿›è¡Œå¿«é€Ÿå®šä½ã€‚

```sql
-- å‡è®¾nameåˆ—æ˜¯VARCHARç±»åž‹
-- ç´¢å¼•å¤±æ•ˆï¼šå­—ç¬¦ä¸²è½¬æ•°å­—
SELECT * FROM users WHERE name = 123;
-- MySQLä¼šå°†nameåˆ—çš„å€¼è½¬æ¢ä¸ºæ•°å­—è¿›è¡Œæ¯”è¾ƒï¼Œå¯¼è‡´å…¨è¡¨æ‰«æ

-- ç´¢å¼•ç”Ÿæ•ˆï¼šå­—ç¬¦ä¸²æ¯”è¾ƒ
SELECT * FROM users WHERE name = '123';
-- ç±»åž‹åŒ¹é…ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ç´¢å¼•
```

#### LIKEé€šé…ç¬¦å‰ç½®å¯¼è‡´ç´¢å¼•å¤±æ•ˆ

**åŽŸå› åˆ†æžï¼š**
B+Treeç´¢å¼•æ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæŽ’åºçš„ï¼Œå‰ç½®é€šé…ç¬¦ï¼ˆå¦‚`%å¼ `ï¼‰æ„å‘³ç€åŒ¹é…ä»»æ„å‰ç¼€ï¼Œæ— æ³•åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§è¿›è¡ŒèŒƒå›´å®šä½ã€‚

```sql
-- ç´¢å¼•å¤±æ•ˆï¼šå‰ç½®é€šé…ç¬¦
SELECT * FROM users WHERE name LIKE '%å¼ %';
-- éœ€è¦æ‰«ææ‰€æœ‰è®°å½•ï¼Œæ£€æŸ¥æ¯ä¸ªå€¼æ˜¯å¦åŒ…å«"å¼ "

-- ç´¢å¼•ç”Ÿæ•ˆï¼šåŽç½®é€šé…ç¬¦
SELECT * FROM users WHERE name LIKE 'å¼ %';
-- å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æœ‰åºæ€§ï¼Œç›´æŽ¥å®šä½åˆ°ä»¥"å¼ "å¼€å¤´çš„è®°å½•èŒƒå›´
```

#### ORæ¡ä»¶ä¸­æœ‰éžç´¢å¼•åˆ—

**åŽŸå› åˆ†æžï¼š**
ORæ¡ä»¶éœ€è¦æ»¡è¶³ä»»æ„ä¸€ä¸ªæ¡ä»¶å³å¯ï¼Œå¦‚æžœå…¶ä¸­ä¸€ä¸ªæ¡ä»¶æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼ŒMySQLé€šå¸¸ä¼šé€‰æ‹©å…¨è¡¨æ‰«ææ¥ç¡®ä¿ç»“æžœæ­£ç¡®æ€§ã€‚

```sql
-- ç´¢å¼•å¤±æ•ˆï¼šORæ¡ä»¶æ··ç”¨
SELECT * FROM users WHERE name = 'å¼ ä¸‰' OR status = 'active';
-- statusåˆ—æ— ç´¢å¼•ï¼Œéœ€è¦å…¨è¡¨æ‰«ææ£€æŸ¥status='active'çš„è®°å½•

-- åˆ†æˆä¸¤æ¬¡æŸ¥è¯¢æˆ–ä½¿ç”¨UNION
SELECT * FROM users WHERE name = 'å¼ ä¸‰'
UNION
SELECT * FROM users WHERE status = 'active';
-- åˆ†åˆ«åˆ©ç”¨å„è‡ªçš„ç´¢å¼•ï¼Œç„¶åŽåˆå¹¶ç»“æžœ
```



#### è¿ç®—è¡¨è¾¾å¼å¯¼è‡´ç´¢å¼•å¤±æ•ˆ

**åŽŸå› åˆ†æžï¼š**
ä¸Žå‡½æ•°ç±»ä¼¼ï¼Œå¯¹ç´¢å¼•åˆ—è¿›è¡Œè¿ç®—ä¼šæ”¹å˜åˆ—å€¼çš„æ¯”è¾ƒåŸºå‡†ï¼Œæ— æ³•ç›´æŽ¥ä½¿ç”¨ç´¢å¼•çš„æœ‰åºæ€§ã€‚

```sql
-- ç´¢å¼•å¤±æ•ˆï¼šåˆ—å‚ä¸Žè¿ç®—
SELECT * FROM users WHERE age + 10 = 30;
-- éœ€è¦å¯¹æ¯è¡Œæ•°æ®çš„ageåˆ—è¿›è¡ŒåŠ æ³•è¿ç®—

-- ç´¢å¼•ç”Ÿæ•ˆï¼šç§»é¡¹å˜æ¢
SELECT * FROM users WHERE age = 20;
-- ç›´æŽ¥æ¯”è¾ƒåˆ—å€¼ï¼Œå¯ä»¥åˆ©ç”¨ç´¢å¼•
```

## 7. ä¸åŒå­˜å‚¨å¼•æ“Žçš„ç´¢å¼•ç‰¹ç‚¹

### 7.1 InnoDBå­˜å‚¨å¼•æ“Ž

```sql
-- InnoDBæ”¯æŒB+Treeå’Œè‡ªé€‚åº”å“ˆå¸Œç´¢å¼•
-- è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•ä¼šè‡ªåŠ¨åˆ›å»ºçƒ­ç‚¹æ•°æ®çš„å“ˆå¸Œç´¢å¼•

-- æŸ¥çœ‹è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•çŠ¶æ€
SHOW ENGINE INNODB STATUS;

-- å¼ºåˆ¶ä½¿ç”¨B+Treeç´¢å¼•ï¼ˆç¦æ­¢è‡ªé€‚åº”å“ˆå¸Œï¼‰
SET GLOBAL innodb_adaptive_hash_index = OFF;
```

**InnoDBç´¢å¼•ç‰¹ç‚¹ï¼š**
- **èšç°‡ç´¢å¼•**ï¼šä¸»é”®å†³å®šæ•°æ®çš„ç‰©ç†å­˜å‚¨é¡ºåº
- **äºŒçº§ç´¢å¼•**ï¼šéžä¸»é”®ç´¢å¼•å­˜å‚¨ä¸»é”®å€¼ä½œä¸ºæŒ‡é’ˆ
- **è‡ªåŠ¨ä¼˜åŒ–**ï¼šè‡ªé€‚åº”å“ˆå¸Œç´¢å¼•æå‡æŸ¥è¯¢é€Ÿåº¦
- **äº‹åŠ¡å®‰å…¨**ï¼šæ”¯æŒACIDç‰¹æ€§

### 7.2 MyISAMå­˜å‚¨å¼•æ“Ž

```sql
-- MyISAMåªæ”¯æŒB+Treeç´¢å¼•
CREATE TABLE users_myisam (
    id INT,
    name VARCHAR(50),
    INDEX idx_name (name)
) ENGINE=MyISAM;
```

**MyISAMç´¢å¼•ç‰¹ç‚¹ï¼š**
- ðŸ“ **éžèšç°‡ç´¢å¼•**ï¼šç´¢å¼•å’Œæ•°æ®åˆ†ç¦»å­˜å‚¨
- **æŸ¥è¯¢é€Ÿåº¦**ï¼šæŸäº›æƒ…å†µä¸‹æ¯”InnoDBå¿«
- **ä¸æ”¯æŒäº‹åŠ¡**ï¼šæ²¡æœ‰äº‹åŠ¡å®‰å…¨ç‰¹æ€§
- **ä¸æ”¯æŒå¤–é”®**ï¼šæ— æ³•ä¿è¯å‚ç…§å®Œæ•´æ€§
