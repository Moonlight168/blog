---
title: 包图
date: 2025-10-28
category: UML建模
---

## 一、什么是包图

包图（Package Diagram）是 UML（统一建模语言）中用于组织和管理系统模型的结构图，它主要用于描述系统中各个包（Package）之间的依赖关系，帮助开发者理解系统的整体架构和模块划分。

包图展示了系统的高层设计视图，对于大型复杂系统的模块化组织和管理尤为重要。

---

## 二、包图的组成元素

1. **包（Package）**

    * 用带有标签的文件夹图标表示
    * 包含名称和可选的内容（类、接口、子包等）
    * 示例：
 
      ``` text
      [用户管理]
      ```

2. **包之间的关系**

    * **依赖关系（Dependency）**：一个包依赖于另一个包，用带虚线箭头表示。例如，A包使用了B包中的类。
    * **导入关系（Import）**：一个包导入另一个包中的内容，用带虚线箭头和关键字`<<import>>`的关系表示。
    * **访问关系（Access）**：一个包访问另一个包中的公共内容，用带虚线箭头和关键字`<<access>>`的关系表示。
    * **合并关系（Merge）**：一个包合并另一个包的内容，用带虚线箭头和关键字`<<merge>>`的关系表示。

@startuml 包关系示例
!theme vibrant

package "包A" as PackageA {}
package "包B" as PackageB {}
package "包C" as PackageC {}
package "包D" as PackageD {}
package "包E" as PackageE {}

' 依赖关系：用虚线箭头表示
PackageA ..> PackageB : 依赖

' 导入关系：用虚线箭头和<<import>>关键字表示
PackageC ..> PackageD : <<import>>

' 访问关系：用虚线箭头和<<access>>关键字表示
PackageD ..> PackageC : <<access>>

' 合并关系：用虚线箭头和<<merge>>关键字表示
PackageE ..> PackageB : <<merge>>

@enduml

---

## 三、如何分析包图

1. **识别系统的主要模块**

    * 从系统功能需求出发，识别出系统中的主要功能模块。
    * 根据关注点分离原则，将相关功能组织到一个包中。

2. **确定包的依赖关系**

    * 分析哪些包需要使用其他包的功能。
    * 尽量减少包之间的循环依赖，保持依赖关系的单向性。

3. **检查包的设计合理性**

    * 确保每个包的职责清晰，符合单一职责原则。
    * 检查依赖关系是否过于复杂，避免过度耦合。
    * 考虑包的粒度是否合适，过大或过小都不利于维护。

4. **优化包的组织**

    * 引入中间层包来降低直接依赖。
    * 考虑使用接口或抽象类来减少具体实现的依赖。

---

## 四、如何绘制包图

以“电商系统”为例：

**主要包**：

* `用户管理（UserManagement）`：处理用户相关功能
* `商品管理（ProductManagement）`：处理商品相关功能
* `订单管理（OrderManagement）`：处理订单相关功能
* `支付管理（PaymentManagement）`：处理支付相关功能
* `公共工具（CommonUtils）`：提供公共工具类

**关系说明**：

* `订单管理` 依赖于 `用户管理` 和 `商品管理`
* `支付管理` 依赖于 `订单管理`
* 所有模块都依赖于 `公共工具`


@startuml 电商系统包图
!theme vibrant

package "用户管理" as UserMgmt {
  [用户认证]
  [用户信息]
  [权限控制]
}

package "商品管理" as ProductMgmt {
  [商品信息]
  [商品分类]
  [商品库存]
}

package "订单管理" as OrderMgmt {
  [订单处理]
  [购物车]
  [订单查询]
}

package "支付管理" as PaymentMgmt {
  [支付处理]
  [支付记录]
  [退款处理]
}

package "公共工具" as CommonUtils {
  [日期工具]
  [加密工具]
  [日志记录]
}

' 依赖关系
OrderMgmt -down-> UserMgmt : 依赖
OrderMgmt -down-> ProductMgmt : 依赖
PaymentMgmt --> OrderMgmt : 依赖

' 使用关系（虚线）
UserMgmt ..> CommonUtils : 使用
ProductMgmt ..> CommonUtils : 使用
OrderMgmt ..> CommonUtils : 使用
PaymentMgmt ..> CommonUtils : 使用

@enduml
