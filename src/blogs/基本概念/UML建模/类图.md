---
title: 类图
date: 2025-10-28
category: UML建模
---------------

## 一、什么是类图

类图（Class Diagram）是 UML（统一建模语言）中最核心、最常用的一种结构图，用于描述系统中的 **类（Class）**、**属性（Attribute）**、**方法（Operation）** 以及类之间的 **关系（Relationship）**。

它主要用于从静态结构上展示系统的组成，是面向对象分析与设计（OOAD）中建模的基础工具。

---

## 二、类图的组成元素

1. **类（Class）**

    * 用矩形表示，分为三部分：

        * 第一部分：类名
        * 第二部分：属性（字段）
        * 第三部分：方法（行为）
    * 示例：

      ```
      用户
      -----------------
      - userId: int  
      - username: String  
      -----------------
      + login(): boolean  
      + logout(): void
      ```

2. **类之间的关系（Relationships）**

    * **关联（Association）**：两个类之间存在业务联系，用实线表示，可标注多重性（如 1..*, 0..1）。
    * **聚合（Aggregation）**：整体与部分的关系，部分可以独立存在，用空心菱形表示。
    * **组合（Composition）**：整体与部分的强依赖关系，部分不能脱离整体，用实心菱形表示。
    * **继承（Generalization）**：表示父类与子类的继承关系，用带空心三角形的实线箭头表示。
    * **实现（Realization）**：类实现接口，用带空心三角形的虚线箭头表示。
    * **依赖（Dependency）**：类的某个方法中使用了另一个类，用虚线箭头表示。

**PlantUML表示示例**：

@startuml 类关系示例
!theme vibrant

class A {}
class B {}
class C {}
class D {}
class E {}
interface F {}

' 关联关系：用实线表示
A -- B : 关联

' 聚合关系：用空心菱形表示
C o-- B : 聚合

' 组合关系：用实心菱形表示
D *-- B : 组合

' 继承关系：用带空心三角形的实线箭头表示
E <|-- A : 继承

' 实现关系：用带空心三角形的虚线箭头表示
C ..|> F : 实现

' 依赖关系：用虚线箭头表示
A ..> D : 依赖

@enduml

---

## 三、如何分析类图

1. **识别系统中的主要实体**

    * 从业务需求或用例图出发，找出系统中核心的对象（如“用户”、“订单”、“商品”等）。

2. **确定类的属性与方法**

    * 属性描述对象的状态，方法描述对象的行为。
    * 可从需求描述中提炼，如“用户可以登录” → login() 方法。

3. **确定类之间的关系**

    * 判断类之间是否为继承、聚合、组合或依赖关系。
    * 标注类之间的多重性（例如，一个用户可以有多个订单 → 1..*）。

4. **检查职责划分是否合理**

    * 确保每个类的职责单一（符合单一职责原则 SRP）。
    * 避免类之间存在过多的耦合。

---

## 四、如何绘制类图

以“校园卡消费系统”为例：

**主要类**：

* `User`（用户）
* `Wallet`（钱包）
* `Transaction`（交易记录）
* `Cafeteria`（食堂）

**关系说明**：

* `User` 与 `Wallet` 是 **一对一关联关系**。
* `Wallet` 与 `Transaction` 是 **一对多聚合关系**。
* `Cafeteria` 与 `Transaction` 是 **一对多关联关系**。
* 若 `Student` 继承自 `User`，则两者是 **继承关系**。

@startuml 校园卡消费系统类图
!theme sketchy-outline

' 定义类及属性/方法（示例）
class User {
-userId: String
-name: String
-role: String
+login(): boolean
+getUserInfo(): String
}

class Student extends User {
-studentId: String
-department: String
+checkCourse(): List<Course>
}

class Wallet {
-walletId: String
-balance: BigDecimal
-userId: String
+recharge(amount: BigDecimal): boolean
+deduct(amount: BigDecimal): boolean
+getBalance(): BigDecimal
}

class Transaction {
-transId: String
-amount: BigDecimal
-transTime: LocalDateTime
-type: String  // 消费/充值
-walletId: String
-cafeteriaId: String
+getTransDetail(): String
}

class Cafeteria {
-cafeteriaId: String
-name: String
-location: String
+getMenu(): List<Food>
+confirmPayment(trans: Transaction): boolean
}

' 关系定义
User "1" -- "1" Wallet: 拥有（一对一）
Wallet "1" *-- "*" Transaction: 包含（一对多，聚合）
Cafeteria "1" -- "*" Transaction: 产生（一对多）
User <|-- Student: 继承

@enduml

---
